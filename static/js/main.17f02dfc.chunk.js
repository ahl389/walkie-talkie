(this.webpackJsonpWalkieTalkie=this.webpackJsonpWalkieTalkie||[]).push([[0],{26:function(t,e,n){t.exports=n(74)},31:function(t,e,n){},32:function(t,e,n){},74:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),s=n(21),o=n.n(s),c=(n(31),n(22)),r=n(23),u=n(4),l=n(25),d=n(24),h=(n(32),n(33).Device),p=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).state={identity:"",status:"",ready:!1,authorized:!1,password:""},a.connect=a.connect.bind(Object(u.a)(a)),a.disconnect=a.disconnect.bind(Object(u.a)(a)),a.onChangeUpdateState=a.onChangeUpdateState.bind(Object(u.a)(a)),a.typePassword=a.typePassword.bind(Object(u.a)(a)),a.authorize=a.authorize.bind(Object(u.a)(a)),a.setup=a.setup.bind(Object(u.a)(a)),a}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=new h;this.setState({device:e}),e.on("incoming",(function(e){e.accept(),t.setState({status:"call incoming"})})),e.on("ready",(function(e){t.setState({status:"online",ready:!0})})),e.on("connect",(function(e){t.setState({status:"connected"})})),e.on("disconnect",(function(e){t.setState({status:"disconnected"})}))}},{key:"connect",value:function(){this.state.device.connect({recipient:this.state.recipient}),this.setState({status:"calling"})}},{key:"disconnect",value:function(t){this.state.device.disconnectAll()}},{key:"setup",value:function(t){var e=this;t.preventDefault(),fetch("".concat("https://walkie-talkie-8585-dev.twil.io","/token?identity=").concat(this.state.identity)).then((function(t){return t.json()})).then((function(t){e.state.device.setup(t.accessToken),e.state.device.audio.incoming(!1),e.state.device.audio.outgoing(!1),e.state.device.audio.disconnect(!1),e.setState({status:"online",recipient:"friend1"==e.state.identity?"friend2":"friend1"})})).catch((function(t){return console.log(t)}))}},{key:"onChangeUpdateState",value:function(t){this.setState({identity:t.target.value})}},{key:"typePassword",value:function(t){this.setState({password:t.target.value})}},{key:"authorize",value:function(t){t.preventDefault(),"Programmerlizard9217;"==this.state.password?this.setState({authorized:!0,status:"offline"}):this.setState({status:"unauthorized"})}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},this.state.authorized?i.a.createElement("div",null,this.state.ready?i.a.createElement("button",{onMouseDown:this.connect,onMouseUp:this.disconnect},"Press to Talk"):i.a.createElement("div",null,i.a.createElement("p",null,"Enter your name to begin."),i.a.createElement("form",{onSubmit:this.setup},i.a.createElement("input",{type:"text",value:this.state.identity,onChange:this.onChangeUpdateState,placeholder:"What's your name?"}),i.a.createElement("input",{type:"submit",value:"Begin Session"})))):i.a.createElement("form",{onSubmit:this.authorize},i.a.createElement("input",{type:"password",value:this.state.password,onChange:this.typePassword,placeholder:"Password"}),i.a.createElement("input",{type:"submit",value:"Enter Password"})),i.a.createElement("p",null,this.state.status))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(p,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.17f02dfc.chunk.js.map